<Window x:Class="SubnauticaLauncher.UI.SpeedrunTimerEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        Title="Speedrun Timer"
        Width="500"
        SizeToContent="Height"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        FontFamily="{DynamicResource AppFontFamily}"
        WindowStyle="None"
        AllowsTransparency="True">

    <Window.Resources>

        <ImageBrush x:Key="BackgroundBrush"
                    Stretch="UniformToFill"/>

        <Style TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style x:Key="MutedText" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#D0E7F2"/>
        </Style>

        <Style x:Key="DarkComboBox" TargetType="ComboBox" BasedOn="{StaticResource DarkComboBoxBase}">
            <Setter Property="Height" Value="35"/>
        </Style>

    </Window.Resources>

    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome
            CaptionHeight="25"
            ResizeBorderThickness="6"
            CornerRadius="0"
            GlassFrameThickness="0"
            UseAeroCaptionButtons="False"/>
    </shell:WindowChrome.WindowChrome>

    <Grid>

        <Rectangle Fill="{StaticResource BackgroundBrush}">
            <Rectangle.Effect>
                <BlurEffect Radius="8"/>
            </Rectangle.Effect>
        </Rectangle>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="25"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0"
                  Background="{StaticResource WindowTitleBarBrush}"
                  MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Image Source="pack://application:,,,/Assets/Icons/SNLIcon.png"
                       Width="16"
                       Height="16"
                       Margin="12,0,8,0"
                       VerticalAlignment="Center"/>

                <TextBlock Grid.Column="1"
                           Text="Speedrun Timer"
                           VerticalAlignment="Center"
                           FontSize="13"
                           Margin="0,3,0,0"
                           FontWeight="SemiBold"/>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="&#x2715;"
                            Width="44"
                            Height="25"
                            Background="{StaticResource DangerRedBrush}"
                            BorderBrush="{StaticResource WindowButtonBorderBrush}"
                            BorderThickness="1"
                            Click="Close_Click"
                            shell:WindowChrome.IsHitTestVisibleInChrome="True"/>
                </StackPanel>
            </Grid>

            <Border Grid.Row="1"
                    Background="{StaticResource VersionListCardBrush}"
                    CornerRadius="14"
                    Padding="14"
                    Margin="12,8,12,12">
                <StackPanel>

                    <TextBlock Text="Speedrun Timer"
                               FontSize="18"
                               FontWeight="SemiBold"
                               Margin="0,0,0,6"/>

                    <TextBlock Text="A timer overlay that shows only when Subnautica is focused, auto-starts and resets with the run."
                               Style="{StaticResource MutedText}"
                               TextWrapping="Wrap"
                               Margin="0,0,0,10"/>

                    <Button x:Name="TimerEnabledToggleButton"
                            Height="32"
                            Background="#8B2C2C"
                            Content="Speedrun Timer: Disabled"
                            HorizontalAlignment="Left"
                            Style="{StaticResource RoundedButton}"
                            Margin="0,0,0,14"
                            Click="TimerEnabledToggleButton_Click"/>

                    <Border Height="1" Background="{StaticResource SoftDividerBrush}" Margin="0,0,0,12"/>

                    <TextBlock Text="Run Configuration"
                               FontSize="15"
                               FontWeight="SemiBold"
                               Margin="0,0,0,10"/>

                    <TextBlock Text="Gamemodes"
                               FontWeight="SemiBold"
                               Margin="0,0,0,4"/>
                    <ComboBox x:Name="GamemodesDropdown"
                              Style="{StaticResource DarkComboBox}"
                              Margin="0,0,0,12"
                              SelectionChanged="GamemodesDropdown_SelectionChanged">
                        <ComboBoxItem Content="Survival / Hardcore" Tag="SurvivalHardcore"/>
                        <ComboBoxItem Content="Creative" Tag="Creative"/>
                    </ComboBox>

                    <Grid Margin="0,0,0,14">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="14"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Categories"
                                       FontWeight="SemiBold"
                                       Margin="0,0,0,4"/>
                            <ComboBox x:Name="CategoryDropdown"
                                      Style="{StaticResource DarkComboBox}"
                                      SelectionChanged="CategoryDropdown_SelectionChanged">
                                <ComboBoxItem Content="Any%" Tag="AnyPercent"/>
                                <ComboBoxItem Content="All Achievements" Tag="AllAchievements"/>
                                <ComboBoxItem Content="100%" Tag="HundredPercent"/>
                                <ComboBoxItem Content="No Damage" Tag="NoDamage"/>
                                <ComboBoxItem Content="All Blueprints" Tag="AllBlueprints"/>
                                <ComboBoxItem Content="Hatch%" Tag="HatchPercent"/>
                                <ComboBoxItem Content="Required Tools" Tag="RequiredTools"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Run Type"
                                       FontWeight="SemiBold"
                                       Margin="0,0,0,4"/>
                            <ComboBox x:Name="RunTypeDropdown"
                                      Style="{StaticResource DarkComboBox}">
                                <ComboBoxItem Content="Glitched" Tag="Glitched"/>
                                <ComboBoxItem Content="Glitchless" Tag="Glitchless"/>
                            </ComboBox>
                        </StackPanel>
                    </Grid>

                    <Border Height="1" Background="{StaticResource SoftDividerBrush}" Margin="0,0,0,12"/>

                    <TextBlock Text="Timer Display"
                               FontSize="15"
                               FontWeight="SemiBold"
                               Margin="0,0,0,10"/>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,14">
                        <Button Content="Edit Timer Style and Placement"
                                Height="32"
                                Margin="0,0,10,0"
                                Background="{StaticResource AccentBlueBrush}"
                                Style="{StaticResource RoundedButton}"
                                Click="EditTimerStyleAndPlacement_Click"/>
                        <Button Content="Manage Splits"
                                Height="32"
                                Background="{StaticResource AccentBlueBrush}"
                                Style="{StaticResource RoundedButton}"
                                Click="ManageSplits_Click"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center"
                                Margin="0,0,0,0">
                        <Button Content="Save"
                                Width="160"
                                Margin="0,0,12,0"
                                Background="{StaticResource AccentBlueBrush}"
                                Style="{StaticResource RoundedButton}"
                                Click="Save_Click"/>

                        <Button Content="Cancel"
                                Width="120"
                                Background="{StaticResource DangerRedBrush}"
                                Style="{StaticResource RoundedButton}"
                                Click="Cancel_Click"/>
                    </StackPanel>

                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
