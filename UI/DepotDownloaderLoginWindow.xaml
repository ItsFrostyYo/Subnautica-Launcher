<Window x:Class="SubnauticaLauncher.UI.DepotDownloaderLoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        Title="Depot Downloader Steam Login"
        Width="460"
        Height="490"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner"
        FontFamily="Aileron"
        WindowStyle="None"
        AllowsTransparency="True">

    <Window.Resources>
        <ImageBrush x:Key="BackgroundBrush" Stretch="UniformToFill"/>

        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#331B4F72"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <Style TargetType="PasswordBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#331B4F72"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <Style x:Key="RoundedButton" TargetType="Button" BasedOn="{StaticResource RoundedButtonBase}">
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="#E8F6FF"/>
            <Setter Property="Margin" Value="0,6,0,0"/>
        </Style>
    </Window.Resources>

    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome
            CaptionHeight="25"
            ResizeBorderThickness="6"
            CornerRadius="0"
            GlassFrameThickness="0"
            UseAeroCaptionButtons="False"/>
    </shell:WindowChrome.WindowChrome>

    <Grid>
        <Rectangle Fill="{StaticResource BackgroundBrush}">
            <Rectangle.Effect>
                <BlurEffect Radius="8"/>
            </Rectangle.Effect>
        </Rectangle>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="25"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0"
                  Background="#40000000"
                  MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Image Source="pack://application:,,,/Assets/Icons/SNLIcon.png"
                       Width="16"
                       Height="16"
                       Margin="12,0,8,0"
                       VerticalAlignment="Center"/>

                <TextBlock Grid.Column="1"
                           Text="Depot Downloader Login"
                           VerticalAlignment="Center"
                           FontSize="13"
                           Margin="0,3,0,0"
                           FontWeight="SemiBold"/>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="—"
                            Width="44"
                            Height="25"
                            Background="Transparent"
                            BorderBrush="#55000000"
                            BorderThickness="1"
                            Click="Minimize_Click"
                            shell:WindowChrome.IsHitTestVisibleInChrome="True"/>
                    <Button Content="□"
                            Width="44"
                            Height="25"
                            Background="Transparent"
                            BorderBrush="#55000000"
                            BorderThickness="1"
                            Click="Maximize_Click"
                            shell:WindowChrome.IsHitTestVisibleInChrome="True"/>
                    <Button Content="✕"
                            Width="44"
                            Height="25"
                            Background="#8B2C2C"
                            BorderBrush="#55000000"
                            BorderThickness="1"
                            Click="Close_Click"
                            shell:WindowChrome.IsHitTestVisibleInChrome="True"/>
                </StackPanel>
            </Grid>

            <Border Grid.Row="1"
                    Background="#331B4F72"
                    CornerRadius="14"
                    Padding="16"
                    Margin="12,12,12,16">
                <StackPanel>
                    <TextBlock Text="Steam Username" FontWeight="SemiBold"/>
                    <TextBox x:Name="UsernameBox" Margin="0,4,0,10"/>

                    <TextBlock Text="Steam Password" FontWeight="SemiBold"/>
                    <PasswordBox x:Name="PasswordBox" Margin="0,4,0,2"/>
                    <TextBlock x:Name="PasswordHintText"
                               Visibility="Collapsed"
                               FontSize="12"
                               Foreground="#D0E7F2"
                               TextWrapping="Wrap"
                               MaxWidth="410"
                               Text="If this is your first remembered login setup, enter password once so DepotDownloader can save a sentry cache."/>

                    <CheckBox x:Name="RememberPasswordCheck"
                              Content="Remember password in DepotDownloader (Steam sentry cache)"/>
                    <CheckBox x:Name="UseRememberedLoginCheck"
                              Content="Use remembered login only when cache already exists"
                              Click="UseRememberedLoginCheck_Click"/>
                    <CheckBox x:Name="PreferTwoFactorCodeCheck"
                              Content="Prefer code entry over mobile confirmation (-no-mobile)"
                              IsChecked="True"/>

                    <TextBlock TextWrapping="Wrap"
                               Margin="0,10,0,12"
                               FontSize="12"
                               Background="#80000000"
                               Foreground="#D0E7F2"
                               Padding="8"
                               Text="The launcher never stores your Steam password. Only non-sensitive install preferences are saved locally."/>

                    <TextBlock x:Name="StatusText"
                               Foreground="#FFD28B4F"
                               TextWrapping="Wrap"
                               MaxWidth="410"
                               TextTrimming="None"
                               Margin="0,0,0,12"/>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="Continue"
                                Width="120"
                                Margin="0,0,12,0"
                                Background="#FF4FD38B"
                                Style="{StaticResource RoundedButton}"
                                Click="Login_Click"/>
                        <Button Content="Cancel"
                                Width="120"
                                Background="#8B2C2C"
                                Style="{StaticResource RoundedButton}"
                                Click="Cancel_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
